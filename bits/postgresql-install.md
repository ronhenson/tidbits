---
title: "Postgresql Install"
created: 2021-07-26 18:07:17
tags: database
keywords: postgreq, sql, init, systemctl, firewall-cmd
---

# Postgresql Install

## Fedora 34 and Postgresql 13

```bash
sudo dnf install https://download.postgresql.org/pub/repos/yum/reporpms/F-34-x86_64/pgdg-fedora-repo-latest.noarch.rpm
```

## Fedora dnf install

```bash
# list available modules contain postgresql

sudo dnf module list postgresql
# output
# --------------------
Last metadata expiration check: 0:02:14 ago on Tue 27 Jul 2021 09:06:20 AM CDT.
Fedora Modular 34 - x86_64
Name           Stream     Profiles                Summary
postgresql     9.6        client, server [d]      PostgreSQL module
postgresql     10         client, server [d]      PostgreSQL module
postgresql     11         client, server [d]      PostgreSQL module
postgresql     12         client, server          PostgreSQL module
postgresql     13         client, server          PostgreSQL module

Fedora Modular 34 - x86_64 - Updates
Name          Stream      Profiles                Summary
postgresql    9.6         client, server [d]      PostgreSQL module
postgresql    10          client, server [d]      PostgreSQL module
postgresql    11          client, server [d]      PostgreSQL module
postgresql    12          client, server          PostgreSQL module
postgresql    13          client, server          PostgreSQL module

Hint: [d]efault, [e]nabled, [x]disabled, [i]nstalled
# --------------------
# enable version
sudo dnf module enable postgresql:13
# output
# --------------------
Last metadata expiration check: 0:30:54 ago on Tue 27 Jul 2021 09:06:20 AM CDT.
Dependencies resolved.
 Package    Architecture   Version   Repository   Size
Enabling module streams:
 postgresql                13
Transaction Summary
Is this ok [y/N]: y
Complete!
# --------------------
```

```bash
sudo dnf install postgreql-server
```

## Initialize database

```bash
sudo /usr/bin/postgresql-setup initdb
```

## systemctl enable and start

```bash
sudo systemctl enable --now postgresql.service

systemctl status postgresql
```

## firewall-cmd if remote access

```bash
sudo firewall-cmd --add-service=postgresql --permanent
sudo firewall-cmd --reload

# edit postgresql.conf
sudo nvim /var/lib/pgsql/data/postgresql.conf
listen_addresses = '*'

sudo nvim /var/lib/pgsql/data/pg_hba.conf

# Accept from anywhere
host all all 0.0.0.0/0 md5

# Accept from trusted host
host all all 10.10.10.0/24 md5

# restart postgresql
sudo systemctl restart postgresql.service
```

## Set admin user's password

```bash
sudo su - postgres
psql -c "alter user postgres with password 'StrongDBPassword'"

# or
sudo su - postgres -c "psql"
\password StrongDBssword
```

## Install pgAdmin Web Management

```bash
sudo dnf install pgAdmin4-fedora-repo.noarch

# confirm configuration syntax
sudo httpd -t
Syntx OK
sudo systemctl restart httpd

# Create pgAdmin data directories
sudo mkdir -p /var/lib/pgadmin4/ var/log/pgadmin4/

# Edit config_local.py and add the followings settings
sudo nvim /usr/lib/python
```

- Example how to change database directory [[systemctl-servies-config-changes]]
- Issue installing psycopg2 [[postgresql13-install-psycopg2-issue-210727]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[postgresql13-install-psycopg2-issue-210727]: postgresql13-install-psycopg2-issue-210727.md "Postgresql13 Install Psycopg2 Issue 210727"
[//end]: # "Autogenerated link references"
